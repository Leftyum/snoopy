-- Services
local Players = game:GetService("Players")
local VirtualInputManager = game:GetService("VirtualInputManager")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TouchAutoClicker"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = player:WaitForChild("PlayerGui")

-- CPS (clicks per second)
local cps = 5
local clicking = false

-- Click function
local function startClicking()
    if clicking then return end
    clicking = true

    task.spawn(function()
        while clicking do
            local cam = workspace.CurrentCamera
            if cam then
                local center = Vector2.new(cam.ViewportSize.X / 2, cam.ViewportSize.Y / 2)

                -- Simulate a tap at the screen center
                VirtualInputManager:SendTouchEvent(Enum.UserInputType.Touch, 0, center, true, game)
                VirtualInputManager:SendTouchEvent(Enum.UserInputType.Touch, 0, center, false, game)
            end
            task.wait(1 / cps)
        end
    end)
end

local function stopClicking()
    clicking = false
end

-- Detect screen press and release
UserInputService.TouchStarted:Connect(function(input, processed)
    if not processed then
        startClicking()
    end
end)

UserInputService.TouchEnded:Connect(function(input, processed)
    stopClicking()
end)
