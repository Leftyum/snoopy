-- Services
local Players = game:GetService("Players")
local VirtualInputManager = game:GetService("VirtualInputManager")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TouchAutoClicker"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Frame to hold the toggle button and the auto-clicker UI
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, 60)
frame.Position = UDim2.new(0, 10, 0, 10)
frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
frame.BorderSizePixel = 0
frame.Visible = false -- Initially hidden
frame.Parent = screenGui

-- Toggle Button
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(1, 0, 1, 0)
toggleBtn.Text = "Show Auto Clicker"
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
toggleBtn.Font = Enum.Font.SourceSansBold
toggleBtn.TextSize = 20
toggleBtn.Parent = frame

-- CPS (clicks per second)
local cps = 5
local clicking = false

-- Click function
local function startClicking()
    if clicking then return end
    clicking = true

    task.spawn(function()
        while clicking do
            local cam = workspace.CurrentCamera
            if cam then
                local center = Vector2.new(cam.ViewportSize.X / 2, cam.ViewportSize.Y / 2)

                -- Simulate a tap at the screen center
                VirtualInputManager:SendTouchEvent(Enum.UserInputType.Touch, 0, center, true, game)
                VirtualInputManager:SendTouchEvent(Enum.UserInputType.Touch, 0, center, false, game)
            end
            task.wait(1 / cps)
        end
    end)
end

local function stopClicking()
    clicking = false
end

-- Detect screen press and release
UserInputService.TouchStarted:Connect(function(input, processed)
    if not processed then
        startClicking()
    end
end)

UserInputService.TouchEnded:Connect(function(input, processed)
    stopClicking()
end)

-- Toggle visibility of the auto-clicker frame (show/hide)
toggleBtn.MouseButton1Click:Connect(function()
    frame.Visible = not frame.Visible
    toggleBtn.Text = frame.Visible and "Hide Auto Clicker" or "Show Auto Clicker"
end)

-- Ensure the GUI appears on mobile devices
screenGui.ResetOnSpawn = false  -- Ensure it remains on screen if the player respawns
screenGui.IgnoreGuiInset = true -- Allows the GUI to stay within the screen bounds on mobile
frame.Visible = true -- Make sure the frame is visible right away on mobile
