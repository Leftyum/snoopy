local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local Players = game:GetService("Players")

if not UIS.TouchEnabled or UIS.KeyboardEnabled then return end -- Ensure it's MOBILE only

local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "LEFTAC"
gui.ResetOnSpawn = false
gui.Parent = PlayerGui

-- Main Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, 140)
frame.Position = UDim2.new(0.05, 0, 0.1, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.Active = true
frame.Draggable = true
frame.Parent = gui

-- Toggle Button
local toggle = Instance.new("TextButton")
toggle.Size = UDim2.new(1, -20, 0, 40)
toggle.Position = UDim2.new(0, 10, 0, 10)
toggle.Text = "Auto Clicker OFF"
toggle.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
toggle.TextColor3 = Color3.new(1, 1, 1)
toggle.Font = Enum.Font.SourceSansBold
toggle.TextSize = 20
toggle.Parent = frame

-- CPS TextBox
local cpsBox = Instance.new("TextBox")
cpsBox.Size = UDim2.new(1, -20, 0, 30)
cpsBox.Position = UDim2.new(0, 10, 0, 60)
cpsBox.Text = "10"
cpsBox.PlaceholderText = "CPS"
cpsBox.TextColor3 = Color3.new(1, 1, 1)
cpsBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
cpsBox.Font = Enum.Font.SourceSans
cpsBox.TextSize = 20
cpsBox.ClearTextOnFocus = false
cpsBox.Parent = frame

-- Auto Clicker State
local clicking = false
local connection

-- Function to simulate mobile click
local function click()
    local pos = UIS:GetMouseLocation()
    VirtualInputManager:SendTouchEvent(Enum.UserInputType.Touch, pos, 0, true, game)
    VirtualInputManager:SendTouchEvent(Enum.UserInputType.Touch, pos, 0, false, game)
end

-- Toggle Clicker
toggle.MouseButton1Click:Connect(function()
    clicking = not clicking
    toggle.Text = clicking and "Auto Clicker ON" or "Auto Clicker OFF"
    toggle.BackgroundColor3 = clicking and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)

    if clicking then
        local cps = tonumber(cpsBox.Text) or 10
        local interval = 1 / math.clamp(cps, 1, 100)

        connection = RunService.RenderStepped:Connect(function(dt)
            click()
            task.wait(interval)
        end)
    else
        if connection then connection:Disconnect() end
    end
end)
